<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick start • covidregionaldata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Quick start">
<meta property="og:description" content="covidregionaldata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidregionaldata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/quickstart.html">Getting Started</a>
</li>
<li>
  <a href="../articles/data_checks.html">Data Status</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiforecasts/covidregionaldata">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="quickstart_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Quick start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/covidregionaldata/blob/master/vignettes/quickstart.Rmd"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="hidden name"><code>quickstart.Rmd</code></div>

    </div>

    
    
<div id="quick-start-to-covidregionaldata" class="section level1">
<h1 class="hasAnchor">
<a href="#quick-start-to-covidregionaldata" class="anchor"></a>Quick start to <code>covidregionaldata</code>
</h1>
<p><code>covidregionaldata</code> is designed to extract national and subnational Covid-19 data from publicly available sources, both daily and aggregated over time.</p>
<p>For example, we could:</p>
<ul>
<li>Get the Covid-19 cases and deaths for all countries for each day since reporting began.</li>
<li>Get the total Covid-19 cases and deaths for all countries up to today.</li>
<li>Get the number of new cases for each state in the United States over time.</li>
<li>Get the total number of deaths for all local authorities in the United Kingdom.</li>
</ul>
<p>We will demonstrate some of these examples below, as well as some useful data manipulation and visualisation.</p>
<div id="retrieving-national-cases-and-deaths-over-time" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieving-national-cases-and-deaths-over-time" class="anchor"></a>Retrieving national cases and deaths over time</h2>
<p>Let’s say that we want to see the evolution of the pandemic over time in all countries. To do this, we need to get the number of cases (positive test results) and deaths for each country and date since the pandemic started. Firstly load <code>covidregionaldata</code>, then call <code><a href="../reference/get_national_data.html">get_national_data()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://epiforecasts.io/covidregionaldata">covidregionaldata</a></span><span class="op">)</span>
<span class="va">all_countries</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_national_data.html">get_national_data</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Rows: 93,378</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr  [3]: Country_code, Country, WHO_region</span>
<span class="co">#&gt; dbl  [4]: New_cases, Cumulative_cases, New_deaths, Cumulative_deaths</span>
<span class="co">#&gt; date [1]: Date_reported</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Use `spec()` to retrieve the guessed column specification</span>
<span class="co">#&gt; Pass a specification to the `col_types` argument to quiet this message</span></code></pre></div>
<p>We can take a look at this data by printing it to the console:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">all_countries</span>
<span class="co">#&gt; # A tibble: 93,378 x 15</span>
<span class="co">#&gt;    date       un_region who_region country iso_code cases_new cases_total</span>
<span class="co">#&gt;    &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2020-01-03 Asia      EMRO       Afghan… AF               0           0</span>
<span class="co">#&gt;  2 2020-01-03 Europe    EURO       Albania AL               0           0</span>
<span class="co">#&gt;  3 2020-01-03 Africa    AFRO       Algeria DZ               0           0</span>
<span class="co">#&gt;  4 2020-01-03 Oceania   WPRO       Americ… AS               0           0</span>
<span class="co">#&gt;  5 2020-01-03 Europe    EURO       Andorra AD               0           0</span>
<span class="co">#&gt;  6 2020-01-03 Africa    AFRO       Angola  AO               0           0</span>
<span class="co">#&gt;  7 2020-01-03 Americas  AMRO       Anguil… AI               0           0</span>
<span class="co">#&gt;  8 2020-01-03 Americas  AMRO       Antigu… AG               0           0</span>
<span class="co">#&gt;  9 2020-01-03 Americas  AMRO       Argent… AR               0           0</span>
<span class="co">#&gt; 10 2020-01-03 Asia      EURO       Armenia AM               0           0</span>
<span class="co">#&gt; # … with 93,368 more rows, and 8 more variables: deaths_new &lt;dbl&gt;,</span>
<span class="co">#&gt; #   deaths_total &lt;dbl&gt;, recovered_new &lt;int&gt;, recovered_total &lt;int&gt;,</span>
<span class="co">#&gt; #   hosp_new &lt;int&gt;, hosp_total &lt;int&gt;, tested_new &lt;int&gt;, tested_total &lt;int&gt;</span></code></pre></div>
<p>We can see that this provides information about the number of cases and deaths for each country over time. As a tibble is returned, we can easily manipulate and plot this using <code>tidyverse</code> packages. For example, we can plot the total deaths in Italy over time.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">italy</span> <span class="op">&lt;-</span> <span class="va">all_countries</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op">==</span> <span class="st">'Italy'</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">italy</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">deaths_total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="st">"All reported Covid-19 deaths, Italy"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<p>We could have also filtered by country using <code><a href="../reference/get_national_data.html">get_national_data(country = "Italy")</a></code> to achieve the same result.</p>
<p>To plot the evolution of cases for several countries since the start of the pandemic, we could perform something like the following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">some_countries</span> <span class="op">&lt;-</span> <span class="va">all_countries</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Italy'</span>, <span class="st">'United Kingdom'</span>, <span class="st">'Spain'</span>, <span class="st">'United States'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">some_countries</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cases_total</span>, colour <span class="op">=</span> <span class="va">country</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="st">"All reported Covid-19 cases"</span>, colour <span class="op">=</span> <span class="st">"Country"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
</div>
<div id="retrieving-total-cases-and-deaths-for-all-countries" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieving-total-cases-and-deaths-for-all-countries" class="anchor"></a>Retrieving total cases and deaths for all countries</h2>
<p>Using <code><a href="../reference/get_national_data.html">get_national_data(totals = TRUE)</a></code> we can obtain total cases and deaths for all nations up to the latest date reported. This is useful to get a snapshot of the current running total for each country. Note how the data is sorted by the total number of cases:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">all_countries_totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_national_data.html">get_national_data</a></span><span class="op">(</span>totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Rows: 93,378</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr  [3]: Country_code, Country, WHO_region</span>
<span class="co">#&gt; dbl  [4]: New_cases, Cumulative_cases, New_deaths, Cumulative_deaths</span>
<span class="co">#&gt; date [1]: Date_reported</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Use `spec()` to retrieve the guessed column specification</span>
<span class="co">#&gt; Pass a specification to the `col_types` argument to quiet this message</span>
<span class="va">all_countries_totals</span>
<span class="co">#&gt; # A tibble: 236 x 4</span>
<span class="co">#&gt;    country        iso_code cases_total deaths_total</span>
<span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;          &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt;  1 United States  US          25512197       430166</span>
<span class="co">#&gt;  2 India          IN          10733131       154147</span>
<span class="co">#&gt;  3 Brazil         BR           9058687       221547</span>
<span class="co">#&gt;  4 Russia         RU           3832080        72697</span>
<span class="co">#&gt;  5 United Kingdom GB           3743738       103126</span>
<span class="co">#&gt;  6 France         FR           3103055        75229</span>
<span class="co">#&gt;  7 Spain          ES           2705001        57806</span>
<span class="co">#&gt;  8 Italy          IT           2529218        87889</span>
<span class="co">#&gt;  9 Turkey         TR           2464030        25736</span>
<span class="co">#&gt; 10 Germany        DE           2205171        56546</span>
<span class="co">#&gt; # … with 226 more rows</span></code></pre></div>
</div>
<div id="retrieving-subnational-region-data" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieving-subnational-region-data" class="anchor"></a>Retrieving subnational region data</h2>
<p>As well as national data, we can also retrieve subnational data, such as states and counties in the US, or regions and local authorities in the UK, and perform similar manipulations. See the <a href="https://epiforecasts.io/covidregionaldata/">README</a> for a current list of countries with subnational data.</p>
<p>To do this, we use <code><a href="../reference/get_regional_data.html">get_regional_data()</a></code>. We’ll get the state-level data for the United States over time:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">usa_states</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_regional_data.html">get_regional_data</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"USA"</span><span class="op">)</span>
<span class="co">#&gt; Rows: 18,329</span>
<span class="co">#&gt; Columns: 5</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr  [2]: state, fips</span>
<span class="co">#&gt; dbl  [2]: cases, deaths</span>
<span class="co">#&gt; date [1]: date</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Use `spec()` to retrieve the guessed column specification</span>
<span class="co">#&gt; Pass a specification to the `col_types` argument to quiet this message</span></code></pre></div>
<p>This retrieves the new and total cases and deaths for all states over time in the United States. Note that the <code>country</code> argument to the <code><a href="../reference/get_regional_data.html">get_regional_data()</a></code> function must be specified. Let’s plot out how the number of cases has evolved for a selection of states:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">usa_states</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'New York'</span>, <span class="st">'Texas'</span>, <span class="st">'Florida'</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cases_total</span>, colour <span class="op">=</span> <span class="va">state</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="st">"All reported Covid-19 cases"</span>, colour <span class="op">=</span> <span class="st">"U.S. state"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-7-1.png" width="576"> The <code>totals</code> argument can also be used in <code>get_regional_data</code> to return the cumulative number of cases or deaths over time.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">usa_states_totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_regional_data.html">get_regional_data</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"USA"</span>, totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Rows: 18,329</span>
<span class="co">#&gt; Columns: 5</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr  [2]: state, fips</span>
<span class="co">#&gt; dbl  [2]: cases, deaths</span>
<span class="co">#&gt; date [1]: date</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Use `spec()` to retrieve the guessed column specification</span>
<span class="co">#&gt; Pass a specification to the `col_types` argument to quiet this message</span></code></pre></div>
<p>Let’s plot the total deaths for each state, ordered by total deaths:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">usa_states_totals</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">state</span>, <span class="op">-</span><span class="va">deaths_total</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">deaths_total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"U.S. states"</span>, y <span class="op">=</span> <span class="st">"All reported Covid-19 deaths"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span>,
        axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<p>Most countries have a hierarchy of political subdivisions. Where data are available, use the <code>include_level_2_regions = TRUE</code> argument to <code>get_regional_data</code>. We can dig down further into each US state by looking at data by county:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">usa_counties</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_regional_data.html">get_regional_data</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"USA"</span>, include_level_2_regions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Rows: 978,931</span>
<span class="co">#&gt; Columns: 6</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr  [3]: county, state, fips</span>
<span class="co">#&gt; dbl  [2]: cases, deaths</span>
<span class="co">#&gt; date [1]: date</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Use `spec()` to retrieve the guessed column specification</span>
<span class="co">#&gt; Pass a specification to the `col_types` argument to quiet this message</span>
<span class="va">usa_counties</span>
<span class="co">#&gt; # A tibble: 1,227,750 x 15</span>
<span class="co">#&gt;    date       county fips  state iso_3166_2 cases_new cases_total deaths_new</span>
<span class="co">#&gt;    &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;          &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2020-01-21 Autau… 01001 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  2 2020-01-21 Baldw… 01003 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  3 2020-01-21 Barbo… 01005 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  4 2020-01-21 Bibb   01007 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  5 2020-01-21 Blount 01009 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  6 2020-01-21 Bullo… 01011 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  7 2020-01-21 Butler 01013 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  8 2020-01-21 Calho… 01015 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt;  9 2020-01-21 Chamb… 01017 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt; 10 2020-01-21 Chero… 01019 Alab… US-AL             NA          NA         NA</span>
<span class="co">#&gt; # … with 1,227,740 more rows, and 7 more variables: deaths_total &lt;dbl&gt;,</span>
<span class="co">#&gt; #   recovered_new &lt;int&gt;, recovered_total &lt;int&gt;, hosp_new &lt;int&gt;,</span>
<span class="co">#&gt; #   hosp_total &lt;int&gt;, tested_new &lt;int&gt;, tested_total &lt;int&gt;</span></code></pre></div>
<p>This returns data for each county on each day of reported data. As there are more than 3,000 counties in the US, with some reporting data since the 21st January, this makes for a very large download.</p>
<p>The same method will work for different countries where data are available, returning relevant sub-national units for each country. In Germany, data are available for Bundesland (federated state) and Kreise (district) areas.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">german_region_totals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_regional_data.html">get_regional_data</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"Germany"</span>, totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1,143,873</span>
<span class="co">#&gt; Columns: 18</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr [9]: Bundesland, Landkreis, Altersgruppe, Geschlecht, Meldedatum, IdLandkreis, Daten...</span>
<span class="co">#&gt; dbl [9]: ObjectId, IdBundesland, AnzahlFall, AnzahlTodesfall, NeuerFall, NeuerTodesfall,...</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Use `spec()` to retrieve the guessed column specification</span>
<span class="co">#&gt; Pass a specification to the `col_types` argument to quiet this message</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">german_region_totals</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">bundesland</span>, <span class="op">-</span><span class="va">deaths_total</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">deaths_total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Bundesland"</span>, y <span class="op">=</span> <span class="st">"All reported Covid-19 deaths"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span>,
        axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
        legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> </code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
</div>
<div id="mapping-data" class="section level2">
<h2 class="hasAnchor">
<a href="#mapping-data" class="anchor"></a>Mapping data</h2>
<p>We provide the relevant national and subnational ISO codes, or local alternatives, to enable mapping. We can map Covid-19 data at national or subnational level, using any standard shapefile. In R, the <code>rnaturalearth</code> package already provides shapefiles for all country borders, and the largest (administrative level 1) subnational units for most countries.</p>
<p>For simplicity here we will use the <code>rworldmap</code> package, which uses data from <code>rnaturalearth</code> for national country borders and inbuilt mapping. We can join Covid-19 data to the map using the <code>iso_code</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get latest worldwide WHO data</span>
<span class="va">map_data</span> <span class="op">&lt;-</span> <span class="fu">covidregionaldata</span><span class="fu">::</span><span class="fu"><a href="../reference/get_national_data.html">get_national_data</a></span><span class="op">(</span>totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">rworldmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rworldmap/man/joinCountryData2Map.html">joinCountryData2Map</a></span><span class="op">(</span>joinCode <span class="op">=</span> <span class="st">"ISO2"</span>, 
                                 nameJoinColumn <span class="op">=</span> <span class="st">"iso_code"</span><span class="op">)</span>
<span class="co">#&gt; Rows: 93,378</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr  [3]: Country_code, Country, WHO_region</span>
<span class="co">#&gt; dbl  [4]: New_cases, Cumulative_cases, New_deaths, Cumulative_deaths</span>
<span class="co">#&gt; date [1]: Date_reported</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Use `spec()` to retrieve the guessed column specification</span>
<span class="co">#&gt; Pass a specification to the `col_types` argument to quiet this message</span>
<span class="co">#&gt; 225 codes from your data successfully matched countries in the map</span>
<span class="co">#&gt; 11 codes from your data failed to match with a country code in the map</span>
<span class="co">#&gt; 16 codes from the map weren't represented in your data</span>
<span class="co"># Produce map</span>
<span class="fu">rworldmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rworldmap/man/mapCountryData.html">mapCountryData</a></span><span class="op">(</span><span class="va">map_data</span>,
                          nameColumnToPlot <span class="op">=</span> <span class="st">"deaths_total"</span>,
                          catMethod <span class="op">=</span> <span class="st">"fixedWidth"</span>,
                          mapTitle <span class="op">=</span> <span class="st">"Total Covid-19 deaths to date"</span>,
                          addLegend <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="quickstart_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.samabbott.co.uk/">Sam Abbott</a>, Katharine Sherratt, Jonnie Bevan, Hamish Gibbs, Paul Campbell, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian">Sebastian Funk</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '721a43acf6af66699c04bd8b2af75ff1',
    indexName: 'epiforecasts',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
